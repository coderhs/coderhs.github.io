<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Mastering the HTML Picture Tag: Responsive Images, WebP, and AVIF - Harisankar P S | Ruby on Rails Developer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Harisankar P S" /><meta name="description" content="Learn how to use the HTML picture tag for responsive images, art direction, and serving modern formats like WebP and AVIF. Includes a complete guide for Rails developers using ActiveStorage." /><meta name="keywords" content="HTML, picture tag, responsive images, webp, avif, rails, activestorage, image optimization, performance" />






<meta name="generator" content="Hugo 0.152.2 with theme even" />


<link rel="canonical" href="https://hsps.in/post/html-picture-tag/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.4b8d38150cffb222fc5c75641f4b036f7a679a6734fad752c4c780cc9d028fe7.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">



<meta property="og:site_name" content="Harisankar P S | Ruby on Rails Developer" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Mastering the HTML Picture Tag: Responsive Images, WebP, and AVIF" />
<meta property="og:url" content="https://hsps.in/post/html-picture-tag/" />
<meta property="og:description" content="Learn how to use the HTML picture tag for responsive images, art direction, and serving modern formats like WebP and AVIF. Includes a complete guide for Rails developers using ActiveStorage." />
<meta property="article:published_time" content="2025-12-07T08:19:13&#43;05:30" />
<meta property="article:modified_time" content="2025-12-07T08:19:13&#43;05:30" />
<meta property="article:author" content="" />
<meta property="article:tag" content="HTML" />
<meta property="article:tag" content="picture tag" />
<meta property="article:tag" content="responsive images" />
<meta property="article:tag" content="webp" />
<meta property="article:tag" content="avif" />
<meta property="article:tag" content="rails" />
<meta property="article:tag" content="ruby" />
<meta property="article:tag" content="performance" />
<meta property="og:image" content="https://hsps.in/images/og-base_hu_aaed7759c49e5d2f.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Mastering the HTML Picture Tag: Responsive Images, WebP, and AVIF" />
<meta name="twitter:description" content="Learn how to use the HTML picture tag for responsive images, art direction, and serving modern formats like WebP and AVIF. Includes a complete guide for Rails developers using ActiveStorage." />
<meta name="twitter:image" content="https://hsps.in/images/og-base_hu_aaed7759c49e5d2f.png" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "\"Mastering the HTML Picture Tag: Responsive Images, WebP, and AVIF\"",
  "url": "\"https://hsps.in/post/html-picture-tag/\"",
  "datePublished": "2025-12-07T08:19:13\u002b05:30",
  "dateModified": "2025-12-07T08:19:13\u002b05:30",
  "author": {
    "@type": "Person",
    "name": "null",
    "url": "https://hsps.in/about"
  },
  "publisher": {
    "@type": "Person",
    "name": "null"
  },
  "description": "\"Learn how to use the HTML picture tag for responsive images, art direction, and serving modern formats like WebP and AVIF. Includes a complete guide for Rails developers using ActiveStorage.\"",
  "wordCount":  1526 ,
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "\"https://hsps.in/post/html-picture-tag/\""
  },
  "image": "\"https://hsps.in/images/og-base_hu_aaed7759c49e5d2f.png\"",
  "keywords": "[\"HTML\",\"picture tag\",\"responsive images\",\"webp\",\"avif\",\"rails\",\"ruby\",\"performance\"]"
}
</script>


<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div class="reading-progress" id="reading-progress"></div>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">HsPS.in</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/post/">
        <li class="mobile-menu-item">Articles</li>
      </a><a href="/videos/">
        <li class="mobile-menu-item">Speaking</li>
      </a><a href="/about">
        <li class="mobile-menu-item">About</li>
      </a><a href="/subscribe">
        <li class="mobile-menu-item">Subscribe</li>
      </a><a href="/projects">
        <li class="mobile-menu-item">Projects</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

<div class="logo-wrapper">
  <a href="/" class="logo">HsPS.in</a>
  <br>
  <i>My thoughts and opinions</i>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/post/">Articles</a>
      </li><li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/videos/">Speaking</a>
      </li><li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/about">About</a>
      </li><li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/subscribe">Subscribe</a>
      </li><li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/projects">Projects</a>
      </li>
  </ul>
</nav>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ME9J4YD4H0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ME9J4YD4H0');
</script>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Mastering the HTML Picture Tag: Responsive Images, WebP, and AVIF</h1>

      <div class="post-meta">
        <span class="post-time"> 2025-12-07 </span>
        <div class="post-category">
            <a href="/categories/html/"> HTML </a>
            <a href="/categories/rails/"> Rails </a>
            <a href="/categories/performance/"> Performance </a>
            </div>
          <span class="more-meta"> 1526 words </span>
          <span class="more-meta"> 8 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#webp-support">WebP Support</a></li>
        <li><a href="#media-size-responsive-images">Media Size (Responsive Images)</a></li>
        <li><a href="#the-combination-mobile-vs-desktop-webp">The Combination: Mobile vs. Desktop WebP</a></li>
        <li><a href="#leveling-up-avif-support">Leveling Up: AVIF Support</a></li>
        <li><a href="#order-matters-first-match-wins">Order Matters: First Match Wins</a></li>
        <li><a href="#future-proofing">Future-Proofing</a></li>
        <li><a href="#doing-it-in-rails">Doing it in Rails</a>
          <ul>
            <li><a href="#1-define-variants-in-the-model">1. Define Variants in the Model</a></li>
            <li><a href="#2-the-view-implementation">2. The View Implementation</a></li>
            <li><a href="#3-cleaning-up-with-helpers-or-components">3. Cleaning Up with Helpers or Components</a></li>
          </ul>
        </li>
        <li><a href="#why-is-this-better-than-javascript">Why is this better than JavaScript?</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>I haven&rsquo;t thought about HTML in a long time, but recently came across the usage of picture tag(s). I was so impressed that I wanted to blog about it. This is nothing new, and used a lot by the web already.</p>
<p>The <code>picture</code> tag gives us a lot of control over how images are loaded, solving two main problems: efficient formats and responsive sizing.</p>
<h2 id="webp-support">WebP Support</h2>
<p>We all know WebP images are smaller and faster to load, but not every browser supported them initially (though support is great now). The <code>picture</code> tag allows us to serve WebP to browsers that support it, while falling back to PNG or JPEG for others.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;image.webp&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/webp&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;image.jpg&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/jpeg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;image.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;My Image&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The browser parses the <code>&lt;source&gt;</code> tags from top to bottom. The first one with a supported <code>type</code> is chosen. If none match, it falls back to the standard <code>&lt;img&gt;</code> tag.</p>
<h2 id="media-size-responsive-images">Media Size (Responsive Images)</h2>
<p>You don&rsquo;t want to load a 4000px wide hero image on a mobile phone. It wastes bandwidth and slows down rendering. With the <code>picture</code> tag, we can switch images based on the viewport width using media queries.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">media</span><span class="o">=</span><span class="s">&#34;(min-width: 800px)&#34;</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;large.jpg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">media</span><span class="o">=</span><span class="s">&#34;(min-width: 400px)&#34;</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;medium.jpg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;small.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;My Responsive Image&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>In this case:</p>
<ul>
<li>Screens wider than 800px get <code>large.jpg</code>.</li>
<li>Screens between 400px and 800px get <code>medium.jpg</code>.</li>
<li>Anything smaller falls back to <code>small.jpg</code>.</li>
</ul>
<h2 id="the-combination-mobile-vs-desktop-webp">The Combination: Mobile vs. Desktop WebP</h2>
<p>The real power comes when you combine both format switching and media queries. This allows for specific &ldquo;Art Direction&rdquo; where you might serve a cropped version of an image for mobile (to keep the subject visible) and a wide version for desktop, both in the most efficient format available.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- Desktop: Wide aspect ratio, WebP --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">media</span><span class="o">=</span><span class="s">&#34;(min-width: 1024px)&#34;</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;desktop-hero.webp&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/webp&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">media</span><span class="o">=</span><span class="s">&#34;(min-width: 1024px)&#34;</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;desktop-hero.jpg&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/jpeg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- Tablet: Smaller wide aspect ratio, WebP --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">media</span><span class="o">=</span><span class="s">&#34;(min-width: 768px)&#34;</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;tablet-hero.webp&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/webp&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">media</span><span class="o">=</span><span class="s">&#34;(min-width: 768px)&#34;</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;tablet-hero.jpg&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/jpeg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- Mobile: Square crop, WebP --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;mobile-hero.webp&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/webp&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;mobile-hero.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;Hero Image&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This setup ensures:</p>
<ol>
<li><strong>Desktop users</strong> get high-res, wide images in efficient WebP format.</li>
<li><strong>Mobile users</strong> get a smaller, potentially cropped image (saving massive bandwidth) in WebP.</li>
<li><strong>Legacy browsers</strong> (on any device) fall back to the JPEG version appropriate for their screen size (if you add media queries to the JPEGs too) or just the default <code>img</code>.</li>
</ol>
<h2 id="leveling-up-avif-support">Leveling Up: AVIF Support</h2>
<p>If you want to go even further, <strong>AVIF (AV1 Image File Format)</strong> offers even better compression than WebP. The beauty of the <code>picture</code> tag is that you can just stack it on top. Browsers will grab the first format they understand.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- 1. Try AVIF (Best Compression) --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;image.avif&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/avif&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- 2. Try WebP (Great Compression, Wide Support) --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;image.webp&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/webp&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- 3. Fallback to JPEG (Universal Support) --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;image.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;My Image&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can combine this with media queries too, creating a robust &ldquo;waterfall&rdquo; of options:</p>
<ol>
<li>Desktop AVIF -&gt; Desktop WebP -&gt; Desktop JPEG</li>
<li>Mobile AVIF -&gt; Mobile WebP -&gt; Mobile JPEG</li>
</ol>
<h2 id="order-matters-first-match-wins">Order Matters: First Match Wins</h2>
<p>It is crucial to understand that the browser parses the <code>&lt;source&gt;</code> tags <strong>from top to bottom</strong> and stops at the <strong>first one</strong> that matches both the <code>media</code> query (if present) and the <code>type</code> support.</p>
<p>There is no complex scoring system. If you put the JPEG source at the top, the browser will see it, say &ldquo;I support JPEG&rdquo;, and download it immediately, ignoring your fancy AVIF and WebP files below.</p>
<p><strong>Always order your sources from &ldquo;Most Preferred&rdquo; (newest/best format) to &ldquo;Least Preferred&rdquo; (fallback).</strong></p>
<h2 id="future-proofing">Future-Proofing</h2>
<p>The <code>picture</code> tag is essentially future-proof. When a new, even better image format comes out in 5 years (let&rsquo;s call it <code>.superimg</code>), you won&rsquo;t need to rewrite your site&rsquo;s logic or wait for all browsers to support it. You just add a new <code>&lt;source&gt;</code> line at the top:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">source</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;image.superimg&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/super&#34;</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Browsers that support it will take it; others will simply ignore it and move to the next line. This &ldquo;progressive enhancement&rdquo; built directly into HTML is why it&rsquo;s often superior to complex JavaScript loading logic.</p>
<h2 id="doing-it-in-rails">Doing it in Rails</h2>
<p>In Rails, we can combine all of this—Art Direction, Format Switching (AVIF/WebP), and automatic variant generation—into a powerful, clean solution using ActiveStorage.</p>
<p>Let&rsquo;s imagine we are building a product page. We want to show a high-quality, wide image for desktop users, and a smaller, square-cropped image for mobile users. And for each size, we want to prioritize AVIF, then WebP, then JPEG.</p>
<h3 id="1-define-variants-in-the-model">1. Define Variants in the Model</h3>
<p>First, we tell ActiveStorage to pre-create these specific versions when a product image is uploaded. This ensures the images are ready to serve immediately, with no processing lag for the user.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
</span></span><span class="line"><span class="cl">  <span class="n">has_one_attached</span> <span class="ss">:main_image</span> <span class="k">do</span> <span class="o">|</span><span class="n">attachable</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># --- Desktop Variants (Large, Wide) ---</span>
</span></span><span class="line"><span class="cl">    <span class="n">attachable</span><span class="o">.</span><span class="n">variant</span> <span class="ss">:desktop_avif</span><span class="p">,</span> <span class="ss">resize_to_limit</span><span class="p">:</span> <span class="o">[</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">800</span><span class="o">]</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:avif</span>
</span></span><span class="line"><span class="cl">    <span class="n">attachable</span><span class="o">.</span><span class="n">variant</span> <span class="ss">:desktop_webp</span><span class="p">,</span> <span class="ss">resize_to_limit</span><span class="p">:</span> <span class="o">[</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">800</span><span class="o">]</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:webp</span>
</span></span><span class="line"><span class="cl">    <span class="n">attachable</span><span class="o">.</span><span class="n">variant</span> <span class="ss">:desktop_jpg</span><span class="p">,</span>  <span class="ss">resize_to_limit</span><span class="p">:</span> <span class="o">[</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">800</span><span class="o">]</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:jpg</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># --- Mobile Variants (Small, Square) ---</span>
</span></span><span class="line"><span class="cl">    <span class="n">attachable</span><span class="o">.</span><span class="n">variant</span> <span class="ss">:mobile_avif</span><span class="p">,</span> <span class="ss">resize_to_fill</span><span class="p">:</span> <span class="o">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="o">]</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:avif</span>
</span></span><span class="line"><span class="cl">    <span class="n">attachable</span><span class="o">.</span><span class="n">variant</span> <span class="ss">:mobile_webp</span><span class="p">,</span> <span class="ss">resize_to_fill</span><span class="p">:</span> <span class="o">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="o">]</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:webp</span>
</span></span><span class="line"><span class="cl">    <span class="n">attachable</span><span class="o">.</span><span class="n">variant</span> <span class="ss">:mobile_jpg</span><span class="p">,</span>  <span class="ss">resize_to_fill</span><span class="p">:</span> <span class="o">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="o">]</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:jpg</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2-the-view-implementation">2. The View Implementation</h3>
<p>Now we can use the <code>picture_tag</code> helper to orchestrate all these sources. Rails will handle the URLs.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">&lt;%=</span> <span class="n">picture_tag</span><span class="p">(</span><span class="err">@</span><span class="n">product</span><span class="o">.</span><span class="n">main_image</span><span class="o">.</span><span class="n">variant</span><span class="p">(:</span><span class="n">mobile_jpg</span><span class="p">))</span> <span class="k">do</span> <span class="o">%&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;%</span><span class="c1"># --- Desktop: 1200px Wide (AVIF -&gt; WebP -&gt; JPG) --- %&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;%=</span> <span class="n">tag</span><span class="o">.</span><span class="n">source</span> <span class="n">media</span><span class="p">:</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">,</span> <span class="n">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="err">@</span><span class="n">product</span><span class="o">.</span><span class="n">main_image</span><span class="o">.</span><span class="n">variant</span><span class="p">(:</span><span class="n">desktop_avif</span><span class="p">)),</span> <span class="n">type</span><span class="p">:</span> <span class="s2">&#34;image/avif&#34;</span> <span class="o">%&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;%=</span> <span class="n">tag</span><span class="o">.</span><span class="n">source</span> <span class="n">media</span><span class="p">:</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">,</span> <span class="n">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="err">@</span><span class="n">product</span><span class="o">.</span><span class="n">main_image</span><span class="o">.</span><span class="n">variant</span><span class="p">(:</span><span class="n">desktop_webp</span><span class="p">)),</span> <span class="n">type</span><span class="p">:</span> <span class="s2">&#34;image/webp&#34;</span> <span class="o">%&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;%=</span> <span class="n">tag</span><span class="o">.</span><span class="n">source</span> <span class="n">media</span><span class="p">:</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">,</span> <span class="n">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="err">@</span><span class="n">product</span><span class="o">.</span><span class="n">main_image</span><span class="o">.</span><span class="n">variant</span><span class="p">(:</span><span class="n">desktop_jpg</span><span class="p">)),</span> <span class="n">type</span><span class="p">:</span> <span class="s2">&#34;image/jpeg&#34;</span> <span class="o">%&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">&lt;%</span><span class="c1"># --- Mobile: 400px Square (AVIF -&gt; WebP) --- %&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;%=</span> <span class="n">tag</span><span class="o">.</span><span class="n">source</span> <span class="n">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="err">@</span><span class="n">product</span><span class="o">.</span><span class="n">main_image</span><span class="o">.</span><span class="n">variant</span><span class="p">(:</span><span class="n">mobile_avif</span><span class="p">)),</span> <span class="n">type</span><span class="p">:</span> <span class="s2">&#34;image/avif&#34;</span> <span class="o">%&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;%=</span> <span class="n">tag</span><span class="o">.</span><span class="n">source</span> <span class="n">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="err">@</span><span class="n">product</span><span class="o">.</span><span class="n">main_image</span><span class="o">.</span><span class="n">variant</span><span class="p">(:</span><span class="n">mobile_webp</span><span class="p">)),</span> <span class="n">type</span><span class="p">:</span> <span class="s2">&#34;image/webp&#34;</span> <span class="o">%&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">&lt;%</span><span class="c1"># --- Fallback: Mobile JPG (defined in the picture_tag argument) --- %&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;%</span> <span class="n">end</span> <span class="o">%&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>How this works in the browser:</strong></p>
<ol>
<li>
<p><strong>Desktop User (Chrome/Firefox/Safari):</strong></p>
<ul>
<li>Browser sees <code>media=&quot;(min-width: 1024px)&quot;</code>. It matches.</li>
<li>It checks the first source: <code>type=&quot;image/avif&quot;</code>. If supported, it downloads the <strong>Desktop AVIF</strong>.</li>
<li>If not, it checks <code>type=&quot;image/webp&quot;</code>. If supported, it downloads the <strong>Desktop WebP</strong>.</li>
<li>If neither, it falls back to the <strong>Desktop JPEG</strong>.</li>
</ul>
</li>
<li>
<p><strong>Mobile User:</strong></p>
<ul>
<li>Browser ignores the <code>(min-width: 1024px)</code> sources.</li>
<li>It sees the next source: <code>type=&quot;image/avif&quot;</code> (no media query, so it applies). It downloads the <strong>Mobile AVIF</strong>.</li>
<li>If AVIF isn&rsquo;t supported, it tries the <strong>Mobile WebP</strong>.</li>
<li>Finally, if all else fails (or on very old browsers), it loads the standard <strong>Mobile JPEG</strong> via the <code>&lt;img&gt;</code> tag.</li>
</ul>
</li>
</ol>
<p>This setup ensures every single user gets the absolute best image for their specific device and browser capabilities, all managed cleanly within Rails.</p>
<h3 id="3-cleaning-up-with-helpers-or-components">3. Cleaning Up with Helpers or Components</h3>
<p>Writing that big block of HTML every time is tedious and error-prone. We can encapsulate this logic to keep our views clean.</p>
<h4 id="option-a-a-simple-rails-helper">Option A: A Simple Rails Helper</h4>
<p>You can create a helper method that takes the attachment and handles the boilerplate.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="c1"># app/helpers/images_helper.rb</span>
</span></span><span class="line"><span class="cl"><span class="k">module</span> <span class="nn">ImagesHelper</span>
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="nf">responsive_image_tag</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="ss">alt_text</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">picture_tag</span><span class="p">(</span><span class="n">attachment</span><span class="o">.</span><span class="n">variant</span><span class="p">(</span><span class="ss">:mobile_jpg</span><span class="p">),</span> <span class="ss">alt</span><span class="p">:</span> <span class="n">alt_text</span><span class="p">)</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">      <span class="n">safe_join</span><span class="p">(</span><span class="o">[</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Desktop</span>
</span></span><span class="line"><span class="cl">        <span class="n">tag</span><span class="o">.</span><span class="n">source</span><span class="p">(</span><span class="ss">media</span><span class="p">:</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">,</span> <span class="ss">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="n">attachment</span><span class="o">.</span><span class="n">variant</span><span class="p">(</span><span class="ss">:desktop_avif</span><span class="p">)),</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&#34;image/avif&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">tag</span><span class="o">.</span><span class="n">source</span><span class="p">(</span><span class="ss">media</span><span class="p">:</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">,</span> <span class="ss">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="n">attachment</span><span class="o">.</span><span class="n">variant</span><span class="p">(</span><span class="ss">:desktop_webp</span><span class="p">)),</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&#34;image/webp&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">tag</span><span class="o">.</span><span class="n">source</span><span class="p">(</span><span class="ss">media</span><span class="p">:</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">,</span> <span class="ss">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="n">attachment</span><span class="o">.</span><span class="n">variant</span><span class="p">(</span><span class="ss">:desktop_jpg</span><span class="p">)),</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&#34;image/jpeg&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># Mobile</span>
</span></span><span class="line"><span class="cl">        <span class="n">tag</span><span class="o">.</span><span class="n">source</span><span class="p">(</span><span class="ss">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="n">attachment</span><span class="o">.</span><span class="n">variant</span><span class="p">(</span><span class="ss">:mobile_avif</span><span class="p">)),</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&#34;image/avif&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">tag</span><span class="o">.</span><span class="n">source</span><span class="p">(</span><span class="ss">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="n">attachment</span><span class="o">.</span><span class="n">variant</span><span class="p">(</span><span class="ss">:mobile_webp</span><span class="p">)),</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&#34;image/webp&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">end</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then in your view:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;%= responsive_image_tag(@product.main_image, alt_text: &#34;Product Shot&#34;) %&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="option-b-viewcomponent">Option B: ViewComponent</h4>
<p>If you prefer a more object-oriented approach (or if the logic gets more complex), a <a href="https://viewcomponent.org/">ViewComponent</a> is perfect for this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="c1"># app/components/responsive_image_component.rb</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ResponsiveImageComponent</span> <span class="o">&lt;</span> <span class="no">ViewComponent</span><span class="o">::</span><span class="no">Base</span>
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">attachment</span><span class="p">,</span> <span class="ss">alt</span><span class="p">:)</span>
</span></span><span class="line"><span class="cl">    <span class="vi">@attachment</span> <span class="o">=</span> <span class="n">attachment</span>
</span></span><span class="line"><span class="cl">    <span class="vi">@alt</span> <span class="o">=</span> <span class="n">alt</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="nf">call</span>
</span></span><span class="line"><span class="cl">    <span class="n">picture_tag</span><span class="p">(</span><span class="vi">@attachment</span><span class="o">.</span><span class="n">variant</span><span class="p">(</span><span class="ss">:mobile_jpg</span><span class="p">),</span> <span class="ss">alt</span><span class="p">:</span> <span class="vi">@alt</span><span class="p">)</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">      <span class="n">safe_join</span><span class="p">(</span><span class="o">[</span>
</span></span><span class="line"><span class="cl">        <span class="n">desktop_sources</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">mobile_sources</span>
</span></span><span class="line"><span class="cl">      <span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">end</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kp">private</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="nf">desktop_sources</span>
</span></span><span class="line"><span class="cl">    <span class="n">safe_join</span><span class="p">(</span><span class="o">[</span>
</span></span><span class="line"><span class="cl">      <span class="n">source_tag</span><span class="p">(</span><span class="ss">:desktop_avif</span><span class="p">,</span> <span class="s2">&#34;image/avif&#34;</span><span class="p">,</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="n">source_tag</span><span class="p">(</span><span class="ss">:desktop_webp</span><span class="p">,</span> <span class="s2">&#34;image/webp&#34;</span><span class="p">,</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="n">source_tag</span><span class="p">(</span><span class="ss">:desktop_jpg</span><span class="p">,</span>  <span class="s2">&#34;image/jpeg&#34;</span><span class="p">,</span> <span class="s2">&#34;(min-width: 1024px)&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="nf">mobile_sources</span>
</span></span><span class="line"><span class="cl">    <span class="n">safe_join</span><span class="p">(</span><span class="o">[</span>
</span></span><span class="line"><span class="cl">      <span class="n">source_tag</span><span class="p">(</span><span class="ss">:mobile_avif</span><span class="p">,</span> <span class="s2">&#34;image/avif&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="n">source_tag</span><span class="p">(</span><span class="ss">:mobile_webp</span><span class="p">,</span> <span class="s2">&#34;image/webp&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="nf">source_tag</span><span class="p">(</span><span class="n">variant</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">media</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">tag</span><span class="o">.</span><span class="n">source</span><span class="p">(</span><span class="ss">srcset</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="vi">@attachment</span><span class="o">.</span><span class="n">variant</span><span class="p">(</span><span class="n">variant</span><span class="p">)),</span> <span class="ss">type</span><span class="p">:</span> <span class="n">type</span><span class="p">,</span> <span class="ss">media</span><span class="p">:</span> <span class="n">media</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>And in your view:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;%= render ResponsiveImageComponent.new(@product.main_image, alt: &#34;Product Shot&#34;) %&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Both approaches drastically reduce noise in your templates and ensure consistent image handling across your entire application.</p>
<h2 id="why-is-this-better-than-javascript">Why is this better than JavaScript?</h2>
<p>You might argue that we could do all this with a bit of JavaScript. While true, the <code>picture</code> tag has significant advantages:</p>
<ol>
<li><strong>Performance:</strong> The browser&rsquo;s pre-parser can scan HTML and start downloading images <em>before</em> JavaScript and CSS are fully parsed and executed.</li>
<li><strong>No JS Dependency:</strong> It works even if JavaScript is disabled or fails to load.</li>
<li><strong>Semantics:</strong> It&rsquo;s standard HTML, making it easier for search engines and accessibility tools to understand.</li>
<li><strong>Native Optimization:</strong> Browsers are highly optimized to handle these selections efficiently without the overhead of script execution.</li>
</ol>
<p>It&rsquo;s a robust, native solution that handles complexity declaratively.</p>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/html/">HTML</a>
          <a href="/tags/picture-tag/">picture tag</a>
          <a href="/tags/responsive-images/">responsive images</a>
          <a href="/tags/webp/">webp</a>
          <a href="/tags/avif/">avif</a>
          <a href="/tags/rails/">rails</a>
          <a href="/tags/ruby/">ruby</a>
          <a href="/tags/performance/">performance</a>
          </div>
      
      
        <div class="related-posts">
          <h3>Related Articles</h3>
          <ul>
            
              <li>
                <a href="/post/access-history-in-irb/">Access History in IRB</a>
                <span class="related-post-date">2022-07-17</span>
              </li>
            
              <li>
                <a href="/post/using-file-upload-to-cache-serving-pdf-files/">Caching Rendered PDFs in Rails with Active Storage</a>
                <span class="related-post-date">2025-07-26</span>
              </li>
            
              <li>
                <a href="/post/storing-postgresql-data-in-a-different-partition-for-performance/">Storing PostgreSQL Data in a Different Partition for Performance</a>
                <span class="related-post-date">2025-01-15</span>
              </li>
            
              <li>
                <a href="/post/run-rails-db-migrate-on-ecs-task-aws/">Running Rails Migrations in AWS ECS Using AWS CLI</a>
                <span class="related-post-date">2024-10-10</span>
              </li>
            
              <li>
                <a href="/post/change-action-mailer-settings-from-rails-console/">Change Action Mailer Settings From Rails Console</a>
                <span class="related-post-date">2024-10-07</span>
              </li>
            
          </ul>
        </div>
      <div class="author-post-intro">
  <p>
    Hi, I'm Harisankar P S! I'm a Senior Software Architect, and this blog is where I share my thoughts on programming,
    devops, anything noteworthy. My primary focus is Ruby on Rails, but I also explore
    full-stack development, linux, go, rust and DevOps projects.
  </p>
  <p>
    If you're interested in collaborating or have a project in mind, feel free to <a href="mailto:projects@hsps.in">email me</a>.
  </p>
  <div class="author-subscribe">
    <p class="subscribe-label">Get new posts delivered to your inbox:</p>
    <script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
    <form
      action="https://app.kit.com/forms/7897017/subscriptions"
      class="seva-form formkit-form"
      method="post"
      data-sv-form="7897017"
      data-uid="52c1473349"
      data-format="inline"
      data-version="5"
      data-options='{"settings":{"after_subscribe":{"action":"message","success_message":"Success! Now check your email to confirm your subscription.","redirect_url":"https://hsps.in"},"analytics":{"google":null,"fathom":null,"facebook":null,"segment":null,"pinterest":null,"sparkloop":null,"googletagmanager":null},"modal":{"trigger":"timer","scroll_percentage":null,"timer":5,"devices":"all","show_once_every":15},"powered_by":{"show":false,"url":"https://kit.com/features/forms?utm_campaign=poweredby&amp;utm_content=form&amp;utm_medium=referral&amp;utm_source=dynamic"},"recaptcha":{"enabled":false},"return_visitor":{"action":"show","custom_content":""},"slide_in":{"display_in":"bottom_right","trigger":"timer","scroll_percentage":null,"timer":5,"devices":"all","show_once_every":15},"sticky_bar":{"display_in":"top","trigger":"timer","scroll_percentage":null,"timer":5,"devices":"all","show_once_every":15}},"version":"5"}'
    >
      <div class="subscribe-form-row">
        <input
          class="formkit-input"
          name="email_address"
          aria-label="Email Address"
          placeholder="your@email.com"
          required=""
          type="email"
        />
        <button data-element="submit" class="formkit-submit formkit-submit">
          <div class="formkit-spinner"><div></div><div></div><div></div></div>
          <span>Subscribe</span>
        </button>
      </div>
      <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul>
    </form>
  </div>
</div>

      <nav class="post-nav">
        <a class="prev" href="/post/git-worktree-ai-workflow/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Git Worktree: Scaling Your AI Workflow</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/object-or-software-builder-pattern-in-ruby/">
            <span class="next-text nav-default">🏗️ Understanding the Builder Pattern with Ruby Examples</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div class="giscus"></div>
  <script src="https://giscus.app/client.js"
          data-repo="coderhs/coderhs.github.io"
          data-repo-id="MDEwOlJlcG9zaXRvcnkyOTE1MzAxMjk="
          data-category="General"
          data-category-id="DIC_kwDOEWBlkc4CjKPc"
          data-mapping="pathname"
          data-strict="1"
          data-reactions-enabled="1"
          data-emit-metadata="1"
          data-input-position="top"
          data-theme="light"
          data-lang="en"
          data-loading="lazy"
          crossorigin="anonymous"
          async>
  </script>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/coderhs" class="iconfont icon-github" title="github"></a>
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2011 - 
    2026<span class="heart"><i class="iconfont icon-heart"></i></span><span>Harisankar P S</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








  
  <script>
    (function() {
      var progressBar = document.getElementById('reading-progress');
      if (!progressBar) return;
      window.addEventListener('scroll', function() {
        var scrollTop = window.scrollY || document.documentElement.scrollTop;
        var docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        if (docHeight > 0) {
          var scrollPercent = (scrollTop / docHeight) * 100;
          progressBar.style.width = scrollPercent + '%';
        }
      });
    })();
  </script>

  
  <script>
    (function() {
      var codeBlocks = document.querySelectorAll('.highlight > .chroma, figure.highlight');
      codeBlocks.forEach(function(block) {
        var btn = document.createElement('button');
        btn.className = 'copy-code-btn';
        btn.textContent = 'Copy';
        btn.addEventListener('click', function() {
          var code = block.querySelector('code');
          if (!code) {
            code = block.querySelector('.code pre');
          }
          if (code) {
            navigator.clipboard.writeText(code.textContent).then(function() {
              btn.textContent = 'Copied!';
              setTimeout(function() { btn.textContent = 'Copy'; }, 2000);
            });
          }
        });
        block.style.position = 'relative';
        block.appendChild(btn);
      });
    })();
  </script>
</body>
</html>
