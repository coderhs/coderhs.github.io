<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Harisankar P S | Ruby on Rails Developer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="" /><meta name="description" content="Harisankar P S - Software Engineer specializing in Ruby on Rails" /><meta name="keywords" content="Harisankar P S, software, developer, Ruby, Ruby on Rails, docker, linux, sre, AWS" />






<meta name="generator" content="Hugo 0.145.0 with theme even" />


<link rel="canonical" href="https://hsps.in/" />
  <link href="https://hsps.in/index.xml" rel="alternate" type="application/rss+xml" title="Harisankar P S | Ruby on Rails Developer" />
  <link href="https://hsps.in/index.xml" rel="feed" type="application/rss+xml" title="Harisankar P S | Ruby on Rails Developer" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.58704fff1f861edb5c44f490dc81af327009b2358b341e82d7786362f310c0be.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:url" content="https://hsps.in/">
  <meta property="og:site_name" content="Harisankar P S | Ruby on Rails Developer">
  <meta property="og:title" content="Harisankar P S | Ruby on Rails Developer">
  <meta property="og:description" content="Harisankar P S - Software Engineer specializing in Ruby on Rails">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Harisankar P S | Ruby on Rails Developer">
  <meta itemprop="description" content="Harisankar P S - Software Engineer specializing in Ruby on Rails">
  <meta itemprop="datePublished" content="2025-07-26T21:47:37+05:30">
  <meta itemprop="dateModified" content="2025-07-26T21:47:37+05:30">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Harisankar P S | Ruby on Rails Developer">
  <meta name="twitter:description" content="Harisankar P S - Software Engineer specializing in Ruby on Rails">

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">HsPS.in</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/post/">
        <li class="mobile-menu-item">Articles</li>
      </a><a href="/videos/">
        <li class="mobile-menu-item">Speaking</li>
      </a><a href="/about">
        <li class="mobile-menu-item">About</li>
      </a><a href="/subscribe">
        <li class="mobile-menu-item">Subscribe</li>
      </a><a href="/projects">
        <li class="mobile-menu-item">Projects</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">HsPS.in</a>
  <br>
  <i>My thoughts and opinions</i>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/post/">Articles</a>
      </li><li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/videos/">Speaking</a>
      </li><li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/about">About</a>
      </li><li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/subscribe">Subscribe</a>
      </li><li class="menu-item" style="margin-right: 1rem;">
        <a class="menu-item-link" href="/projects">Projects</a>
      </li>
  </ul>
</nav>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ME9J4YD4H0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ME9J4YD4H0');
</script>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <section id="posts" class="posts">
    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/using-file-upload-to-cache-serving-pdf-files/">Caching Rendered PDFs in Rails with Active Storage</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2025-07-26 </span>
      <div class="post-category">
          <a href="/categories/rails/"> rails </a>
          </div>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      <p>As I was working on <a href="https://easyclientlog.com">easyclientlog.com</a>, building its invoice system that allows freelancers/consultants to generates PDFs. Working with PDF generating is that, its takes time and CPU cycles. But most of the time
the pdf only needs to be generated once, and the content seldom changes. So rendering the same thing over and over just didnâ€™t feel right. So I used a simple trick that Iâ€™ve followed in many of my prior Rails apps: upload the PDF on first render, store it using Active Storage, and reuse that file on the next access.</p>
<h2 id="the-idea-cache-on-first-render">The Idea: Cache on First Render</h2>
<p>When the PDF is generated the first time, we attach it to the record using Active Storage. This could be an invoice, report, or any other object. The next time we need to show or download the PDF, we skip the rendering step and simply serve the uploaded file.</p>
<p>This avoids unnecessary rendering and speeds up response times, especially for large documents or when generating in bulk.</p>
    </div>
    <div class="read-more">
      <a href="/post/using-file-upload-to-cache-serving-pdf-files/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/rails-current-attributes/">A Complete Guide to Rails.current_attributes (ActiveSupport::CurrentAttributes)</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2025-07-08 </span>
      <div class="post-category">
          <a href="/categories/rails/"> rails </a>
          </div>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      <p>Managing context like the current user, store, client, or request ID across controllers, models, jobs, and services in a Rails app has always been a little messy. Before Rails 5.2, you mightâ€™ve reached for <code>Thread.current</code>, <code>class_attribute</code>, or even <code>@@class_variables</code> to store this kind of state. But these are not thread-safe and can cause hard-to-debug issues in concurrent environments.</p>
<p>Rails 5.2 introduced a clean solution: <code>ActiveSupport::CurrentAttributes</code>.</p>
<p>This article covers what it is, why it exists, how it works internally, how to use it safely across web and background jobs, and how to test it properly.</p>
<hr>
<h2 id="-a-quick-history">ðŸ“œ A Quick History</h2>
<p><code>ActiveSupport::CurrentAttributes</code> was introduced by DHH in Rails 5.2 to simplify access to per-request or per-job context in a thread-safe way. It replaced older, hackier methods like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="no">Thread</span><span class="o">.</span><span class="n">current</span><span class="o">[</span><span class="ss">:current_user</span><span class="o">]</span> <span class="o">=</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl"><span class="no">ApplicationRecord</span><span class="o">.</span><span class="n">class_attribute</span> <span class="ss">:current_client</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>These approaches were shared across threads â€” fine in development, dangerous in production.</p>
<p><code>CurrentAttributes</code> changed that by giving you a dedicated, Rails-friendly API for storing context thatâ€™s isolated per request/job.</p>
    </div>
    <div class="read-more">
      <a href="/post/rails-current-attributes/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/how-i-host-public-apps-using-tailscale/">How I Use Tailscale to Host a Public App From My Laptop</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2025-06-18 </span>
      <div class="post-category">
          <a href="/categories/homelab/"> homelab </a>
          <a href="/categories/tailscale/"> tailscale </a>
          </div>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      <p>I live in India, and getting a static IP at home isnâ€™t straightforward. You usually have to go through customer care, sometimes upgrade to a more expensive plan, and even then itâ€™s not always guaranteed. I wanted a simple setup to make one of my apps publicly accessible without paying a lot or dealing with all that.</p>
<p>So hereâ€™s what I did. I used <strong>Tailscale</strong>, <strong>AWS Lightsail</strong>, <strong>Docker</strong>, and <strong>Nginx Proxy Manager</strong> to expose my laptop to the internet, safely and securely. And right now, I&rsquo;m running <a href="https://easyclientlog.com">https://easyclientlog.com</a> - next.js application and <a href="https://api.easyclientlog.com">https://api.easyclientlog.com</a> - ruby on rails application, using this exact setup.</p>
<h2 id="getting-a-static-ip">Getting a Static IP</h2>
<p>I signed up on AWS and went to Lightsail. Picked Mumbai as the region and selected the cheapest Ubuntu server. AWS gives you a static IP for free (in lightsail) as long as itâ€™s attached to a running instance, and the server itself is free for the first three months.</p>
<p>This server acts like a relay. Itâ€™s the public-facing machine. I donâ€™t run the actual app on it, it just receives the request and forwards it to my laptop at home.</p>
    </div>
    <div class="read-more">
      <a href="/post/how-i-host-public-apps-using-tailscale/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/intro-to-ruby-data-and-comparable/">Ruby `Data` Class â€“ A Convenient Way to Create Value Objects</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2025-06-02 </span>
      <div class="post-category">
          <a href="/categories/ruby/"> ruby </a>
          </div>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      <p>Ruby&rsquo;s <code>Data</code> class was introduced in Ruby 3.2, offering a convenient way to define value objects. The concept of value objects was popularized by Martin Fowler and Eric Evans through their books and articles. In the real world, we often represent properties like coordinates on a map <code>(x, y)</code> or the speed of a carâ€”using primitives such as integers or strings. While these work, they lack the semantic clarity and behavior of custom types. This is where value objects shine. They encapsulate meaning and behavior around a set of values.</p>
<p>Ruby&rsquo;s <code>Data</code> class was created to provide a native way to represent such concepts. Struct does fullfil this requirement, except the part of immutability. Ruby Structs are mutable. Some example of use case for value objects are to represent money, email address, co-ordinates, etc.</p>
<p>Lets now explore ruby Data, keeping in my the characteristics of a value object as shared by Marin Fowler. A value object
should have:</p>
<ul>
<li>No Identity</li>
<li>Immutable</li>
<li>Equality by Value</li>
<li>Small and Simple</li>
<li>Reusable</li>
</ul>
<p>Let&rsquo;s explore how Ruby&rsquo;s <code>Data</code> class supports these characteristics.</p>
<h3 id="class-data">class Data</h3>
<p><code>Data</code> is a core Ruby class, so no external gems are needed.</p>
<p>Here&rsquo;s a simple example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="no">MarsRover</span> <span class="o">=</span> <span class="no">Data</span><span class="o">.</span><span class="n">define</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:x</span><span class="p">,</span> <span class="ss">:y</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
    </div>
    <div class="read-more">
      <a href="/post/intro-to-ruby-data-and-comparable/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/ruby-tap-method/">Understanding Rubyâ€™s `tap` â€” A Powerful Debugging and Configuration Tool</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2025-04-19 </span>
      
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      <p>Rubyâ€™s <code>Object#tap</code> is a small but powerful method that often goes unnoticed. It allows you to &ldquo;tap into&rdquo; a method chain, perform some operation, and return the original objectâ€”regardless of what the block inside returns. This makes it particularly useful for debugging, configuration, or inserting side effects without breaking the flow of your code.</p>
<h2 id="a-simple-use-case-debugging">A Simple Use Case: Debugging</h2>
<p>Take the following example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="n">n</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">].</span><span class="n">map</span> <span class="p">{</span> <span class="n">_1</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">}</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">_1</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This returns <code>[10, 0, 10]</code>. But what if thatâ€™s not what you expected? You might want to inspect the result of the first <code>map</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="n">n</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">].</span><span class="n">map</span> <span class="p">{</span> <span class="n">_1</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">puts</span> <span class="n">n</span><span class="o">.</span><span class="n">inspect</span>
</span></span><span class="line"><span class="cl"><span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">_1</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">puts</span> <span class="n">n</span><span class="o">.</span><span class="n">inspect</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Using <code>tap</code>, we can make this more elegant:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="n">n</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">map</span> <span class="p">{</span> <span class="n">_1</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">             <span class="o">.</span><span class="n">tap</span> <span class="p">{</span> <span class="nb">puts</span> <span class="n">_1</span><span class="o">.</span><span class="n">inspect</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">             <span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">_1</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">             <span class="o">.</span><span class="n">tap</span> <span class="p">{</span> <span class="nb">puts</span> <span class="n">_1</span><span class="o">.</span><span class="n">inspect</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
    </div>
    <div class="read-more">
      <a href="/post/ruby-tap-method/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    </section>
  
  <nav class="pagination">
    
    <a class="next" href="/page/2/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
  </nav>
        </div>
        

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/coderhs" class="iconfont icon-github" title="github"></a>
  
    <a href="/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2011 - 
    2025<span class="heart"><i class="iconfont icon-heart"></i></span><span>Harisankar P S</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
